\documentclass[a4paper,11pt]{article}
% 1. Load essential math packages FIRST
\usepackage{amsmath,amssymb,amsfonts}
\usepackage{algorithmic}
% 2. Load other English-support packages
\usepackage{graphicx}
\usepackage{textcomp}
\usepackage{xcolor}
\usepackage{array}
\usepackage{booktabs}
\usepackage{tabularx}
\usepackage{algorithm}
\usepackage{pdflscape}   % For landscape orientation
\usepackage{multirow}    % For multi-row cells (if needed)
\usepackage{stfloats} % Add to preamble
\usepackage{fancyhdr}
\usepackage{longtable}  % For long tables that span multiple pages
\usepackage{lastpage}
\usepackage{tikz}

% 3. Configure page layout (ILS requirements)
\usepackage[margin=1.5in,a4paper]{geometry}

% 4. Configure spacing (single spacing)
\usepackage{setspace}
\singlespacing

% 5. Configure fonts with proper Arabic features (ILS requirements)
\usepackage{fontspec}
% Fallback to Times New Roman if Calibri not available (similar serif font)
\setmainfont{Times New Roman}[Scale=1.0]
\newfontfamily\arabicfont[
  Script=Arabic,
  Scale=1.0,
  Renderer=HarfBuzz,
  RawFeature={+ss05,+ss06,+ss07}
]{Amiri}

% 6. Configure citation system (APA 7th edition)
\usepackage[style=apa,backend=biber]{biblatex}
\addbibresource{references.bib}

% 4. Define \arb command with proper RTL directionality
\newcommand{\arb}[1]{%
  \bgroup
  \arabicfont
  \textdir TRT
  \pardir TRT
  #1%
  \egroup
}

% \newfontfamily\hafsFont{UthmanicHafs}[
%     Script=Arabic,
%     Path=./fonts/UthmanicHafs/,
%     Scale=1.1,
%     Extension = .ttf,
%     UprightFont=*-Regular,
%     % BoldFont=*-Bold,
%     % ItalicFont=*-Italic,
%     % BoldItalicFont=*-BoldItalic
% ]
%
% \newcommand{\hafs}[1]{{\hafsFont\arb{#1}}}

% 7. Load hyperref LAST
\usepackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,      
    urlcolor=cyan,
    pdfencoding=unicode,
}

% 8. Configure section formatting for APA style
\usepackage{sectsty}

% Level 1: Centered, Bold, Upper and Lowercase Letters
\sectionfont{\centering\bfseries}
\subsectionfont{\raggedright\bfseries}
\subsubsectionfont{\raggedright\bfseries\itshape}

% 9. Configure paragraph formatting (ILS requirements)
% No indentation for first paragraph of each section, 0.5 inch for subsequent paragraphs
\usepackage{indentfirst}
\setlength{\parindent}{0in}
% Use noindent for first paragraphs of sections

% 9. Configure paragraph formatting (ILS requirements)
% No indentation for first paragraph of each section, 0.5 inch for subsequent paragraphs
\usepackage{indentfirst}
\setlength{\parindent}{0in}
\newenvironment{firstpar}{\setlength{\parindent}{0in}}{\setlength{\parindent}{0.5in}}
% Fix section numbering
\makeatletter
\def\@seccntformat#1{\csname the#1\endcsname\quad}
\makeatother
\def\BibTeX{{\rm B\kern-.05em{\sc i\kern-.025em b}\kern-.08em
    T\kern-.1667em\lower.7ex\hbox{E}\kern-.125emX}}
% Footer configuration
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}

% Configure section numbering for APA style
\setcounter{secnumdepth}{5}
\renewcommand{\thesection}{\arabic{section}}
\renewcommand{\thesubsection}{\thesection.\arabic{subsection}}
\renewcommand{\thesubsubsection}{\thesubsection.\arabic{subsubsection}}
    
\begin{document}
\title{Automatic Pronunciation Error Detection and Correction of the Holy Quran's Learners Using Deep Learning}

\author{Abdullah Abdelfttah$^{*1}$, Mahmoud I. Khalil$^{1}$, Hazem Abbas$^{1}$\\
	$^{1}$Computer and Systems Engineering,\\
	Faculty of Engineering, Ain Shams University, Cairo, Egypt\\
	\{2101398, mahmoud.khalil, hazem.abbas\}@eng.asu.edu.eg\\
	$^{*}Corresponding Author}

\date{}  % This will remove the date from the front page
\maketitle
\begin{abstract}
	\input{abstract}
\end{abstract}

\textbf{Keywords}: Mispronunciation Detection Model, Arabic Natural Language Processing, End-to-end Models
\input{sections/introduction}
\input{sections/related_work}
\input{sections/quran_phoneme_script}
\input{sections/data_preparation}
\input{sections/modeling}
\input{sections/results}
\input{sections/limitations_and_future_work}
\input{sections/conclusion}
\input{sections/acknowledgment}
\printbibliography
\section*{Appendix}
\addcontentsline{toc}{section}{Appendix}
\input{sections/appendix/phonemes_vocabulary}
\input{sections/appendix/uthmani_to_qps}
\input{sections/appendix/tasmeea_algorithm}
\input{sections/appendix/moshaf_attributes}
\input{sections/appendix/qdat_bench}
% \input{sections/appendix/detailed_qps_construction}
\end{document}
